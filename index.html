<!Doctype html>
<html>

<head>
    <title>Diplomacy</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="UTF-8">
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #808080;
        }
        
        #canvas {
            position: absolute;
            left: 0;
            top: 0;
            z-index: 0;
        }
        
        #interface {
            position: absolute;
            left: 0;
            top: 0;
            z-index: 1;
        }
    </style>
</head>

<body id="container">
    <canvas id="canvas"></canvas>
    <canvas id="interface"></canvas>

    <!--<script src = "objectModels/setDefaultModel.js"></script>
        <script src = "objectModels/setObjectOffset.js"></script>
        <script src = "objectModels/setObjectListening.js"></script>
        <script src = "objectModels/imageModel.js"></script>
        <script src = "objectModels/textModel.js"></script>
        <script src = "objectModels/rectModel.js"></script>-->
    <script src='options/gameCoords.js'></script>
    <script src='options/dictionaryEnumeration.js'></script>
    <script src='options/dictionaryToList.js'></script>
    <script src='options/gamestart.js'></script>

    <script src='render/loadassets.js'></script>
    <script src='render/image.js'></script>
    <script src='render/rgbtohex.js'></script>
    <script src='render/draw.js'></script>

    <script src='interface/entityinterface.js'></script>
    <script src='interface/towninterface.js'></script>

    <script src='sprites/sprite.js'></script>
    <script src='groups/spritesGroup.js'></script>

    <script src='sprites/empty.js'></script>
    <script src='sprites/elements/text.js'></script>
    <script src='sprites/elements/rect.js'></script>
    <script src='sprites/elements/button.js'></script>
    <script src='sprites/elements/imageButton.js'></script>
    <script src='sprites/border.js'></script>

    <script src='events/geteventpos.js'></script>
    <script src='events/screen.js'></script>
    <script src='events/events.js'></script>

    <script src='interface/menu.js'></script>
    
    <script src='sprites/hexagon.js'></script>
    <script src='groups/grid.js'></script>

    <script src='sprites/entities/entity.js'></script>
    <script src='sprites/entities/buildings/building.js'></script>
    <script src='sprites/entities/units/unit.js'></script>

    
    <script src='sprites/entities/buildings/farm.js'></script>
    <script src='sprites/entities/units/noob.js'></script>
    <script src='sprites/entities/units/KOHb.js'></script>
    <script src='sprites/entities/units/normchel.js'></script>

    <script src='sprites/entities/units/range/rangeUnit.js'></script>
    <script src='sprites/entities/units/range/archer.js'></script>
    
    <script src='sprites/entities/buildings/production.js'></script>
    <script src='sprites/entities/buildings/town.js'></script>

    <script src='player.js'></script>

    <script src='nextTurn.js'></script>
    <script>
        'use strict'
        /*if (document.querySelector("#container").requestFullscreen)
            document.querySelector("#container").requestFullscreen();
        else if (document.querySelector("#container").webkitRequestFullScreen)
            document.querySelector("#container").webkitRequestFullScreen()*/
        let mainCanvas = document.getElementById('canvas')
        
        let mainCtx = mainCanvas.getContext('2d')
        

        let interfaceCanvas = document.getElementById('interface')
        
        let interfaceCtx = interfaceCanvas.getContext('2d')

        let debug = false
        let townInterface = new TownInterface()
        let entityInterface = new EntityInterface()
        let gameEvent = new Events(townInterface, entityInterface)
        let border = new Border()
        let attackBorder = new Border()
        
        let players = [new Player({
                r: 208, 
                g: 208,
                b: 208
            }, true), 
            new Player({
                r: 255,
                g: 0,
                b: 0 //98, 168, 222
            }),
            new Player({
                r: 98,
                g: 168,
                b: 222
            })
        ]
        let grid = new Grid(0, 0, {
            x: 20,
            y: 10
        })
        let mapBorder = {
            left: 0,
            right: grid.getRight(),
            top: 0,
            bottom: grid.getBottom(),
            scale: {
                min: 0.4,
                max: 1
            }
        }


        let whooseTurn = 1
        nextTurnButton.setColor(players[whooseTurn].getHexColor())
        
        function start() {
           
            interfaceCanvas.width = WIDTH
            interfaceCanvas.height = HEIGHT
            interfaceCanvas.style.width = WIDTH / window.devicePixelRatio + 'px'
            interfaceCanvas.style.height = HEIGHT / window.devicePixelRatio + 'px'
            
            mainCanvas.width = WIDTH
            mainCanvas.height = HEIGHT
            mainCanvas.style.width = WIDTH / window.devicePixelRatio + 'px'
            mainCanvas.style.height = HEIGHT / window.devicePixelRatio + 'px'
            
            //createEvents()
            loadAssets()

            grid.arr[5][3].hexagon.repaint(1)

            let TOWN1 = new Town(5, 3, 12, true)

            grid.arr[14][6].hexagon.repaint(2)

            let TOWN2 = new Town(14, 6, 6, true)
            menu.start()
            //requestAnimationFrame(gameLoop)
        }
        window.addEventListener('load', start)
    </script>
</body>

</html>